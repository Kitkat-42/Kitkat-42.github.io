---
layout: single
title: "[ft_printf] printf 함수에 대하여"
categories: "ft_printf"
tags: [ft_printf, C]
---

printf를 클론하려면 printf 함수에 대해 잘 알아야 한다.

```c
#include <stdio.h>

int printf(const char* format, ...);
```

printf 함수는 일련의 데이터를 `특정한 형식`에 맞추어 stdout(표준 출력)에 출력한다.  
우리가 지금까지 printf 함수를 쓸 때, 출력하고 싶은 데이터가 문자이면 %c, 문자열이면 %s라고 써온 것이 그것이다.

# 1. 인자(parameter)

`형식 문자열(format)`에는 `형식 태그(format tag)`라 불리는 것이 들어간다.

형식 태그는 아래와 같이 생겼다.

```
%[플래그(flag)][폭(width)][.정밀도][크기(length)]서식 문자(specifier)
```

## 1.1 서식문자(specifier)

위에서 말한 %c, %s와 같은 것들이 바로 서식 문자이다.

| 서식 문자 | 출력 형태                                                                                                                                  | 예시      |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------ | --------- |
| c         | 문자                                                                                                                                       | a         |
| d or i    | 부호 있는 십진법으로 나타난 정수                                                                                                           | 392       |
| e         | 지수 표기법(Scientific notation) 으로 출력하되, e 문자를 이용한다.                                                                         | 3.9265e+2 |
| E         | 지수 표기법(Scientific notation) 으로 출력하되, E 문자를 이용한다.                                                                         | 3.9265E+2 |
| f         | 십진법으로 나타낸 부동 소수점 수                                                                                                           | 392.65    |
| g         | %e나 %f 보다 간략하게 출력                                                                                                                 | 392.65    |
| G         | %E나 %f 보다 간략하게 출력                                                                                                                 | 392.65    |
| o         | 부호 있는 팔진수                                                                                                                           | 610       |
| s         | 문자열                                                                                                                                     | sample    |
| u         | 부호없는 십진법으로 나타낸 정수                                                                                                            | 7235      |
| x         | 부호없는 16 진법으로 나타낸 정수 (소문자 사용)                                                                                             | 7fa       |
| X         | 부호없는 16 진법으로 나타낸 정수 (대문자 사용)                                                                                             | 7FA       |
| p         | 포인터 주소                                                                                                                                | B800:0000 |
| n         | 아무것도 출력하지 않는다. 그 대신, 인자로 부호 있는 int 형을 가리키는 포인터를 전달해야 되는데, 여기에 현재까지 쓰여진 문자 수가 저장된다. |
| %         | % 다음에 %를 또 붙이면 stdout 에 % 를 출력한다.                                                                                            |           |

## 1.2 플래그(flag)

형식 태그에는 서식문자 말고도 폭, .정확도, 제한자(modifier), 부-서식문자(sub-specifiers)에 관련한 정보들이 포함될 수 있다.  
먼저, 플래그는 기본적으로 출력되는 형태에 대해 조금 더 자세하게 지정할 수 있게 해준다.

| 플래그 | 설명                                                                                                                                                                                                                                                                                                                                                                                             |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| +      | 출력 결과값이 양수인 경우라도 + 기호를 앞에 붙여서 출력하도록 한다. (물론 음수면 자동적으로 - 가 붙는다). 기본적으로 지정하지 않았을 경우 음수에만 앞에 - 가 붙는다.                                                                                                                                                                                                                             |
| (공백) | 앞에 부호가 붙지 않는다면 한 칸을 띄어서 출력한다. (다시말해 123 은 " 123" 으로 출력되고 -123 은 "-123" 으로 출력된다)                                                                                                                                                                                                                                                                           |
| #      | o, x, X 서식 문자들과 사용되면 출력되는 값 앞에 각각 0, 0x, 0X 가 붙게 된다. (이 때 0 은 제외한다). e, E, f 서식 문자들과 사용되면 소수점 아래 수들이 없음에도 불구하고 강제적으로 소수점을 붙이도록 한다. 원래 소수점 아래 수들이 없다면 소수점을 붙이지 않는다. g 와 G 서식 문자들과 사용되면 e 와 E 일때와 동일한 작업을 하지만 소수들의 뒷부분에 붙는 0 들 (123.1200 등) 은 제거되지 않는다. |
| 0      | 수들을 왼쪽으로 정렬하되 빈 칸을 삽입하는 대신에 0 을 삽입한다. (폭 지정자 참조)                                                                                                                                                                                                                                                                                                                 |

## 1.3 폭(width)

폭은 말그대로 출력되는 데이터의 폭을 지정해준다. 참고로 여기서의 폭(width)은 뒤에 나오는 길이(length)와는 완전히 다른 개념이다.

## 1.4 정밀도

정밀도는 말그대로 수치 데이터를 출력할 때 얼마나 정밀하게 출력하는지(즉, 몇자리까지 출력해야 되는지)를 지정해준다.  
정밀도를 나타낼 때는 앞에 꼭 마침표`.`를 찍어 폭과 구분을 해주어야 한다.

## 1.5 길이(length)

길이는 출력하는 데이터의 정확한 크기를 지정하는데 사용된다. 예를 들어 `%d` 서식문자의 경우 막연하게 '정수형 데이터를 10진법으로 출력한다'였지만 길이를 지정해주면 얼마만큼의 크기로 데이터를 출력해야 되는지(`int`냐 `short`냐 등등)를 지정할 수 있다.

| 길이 | 설명                                                                                                                                                                    |
| ---- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| l    | 정수 서식 문자(i,d,o,u,x, X) 에 사용되었을 경우 인자를 long int 나 unsigned long int 로 생각하며 c 나 s 에 사용되었을 경우 wide character 나 wide string 으로 생각한다. |
| L    | 인자를 long double 로 생각한다. (오직 부동 소수점 서식 문자인 e,E,f,g, G 에만 적용된다)                                                                                 |

## 1.6 부수적인 인자

형식 문자열에 따라 함수는 여러 인자들을 가지며, 각 인자는 형식 문자열의 각 형식 태그에 순차적으로 대응된다.  
기본적으로 형식 태그의 수와 뒤따라 붙는 인자들의 수는 같아야 한다.

# 2. 리턴값

출력에 성공하면 전체 문자의 개수를 리턴하고, 출력에 실패하면 음수를 리턴한다.

자세한 내용들은 <a href="https://docs.microsoft.com/ko-kr/cpp/c-runtime-library/format-specification-syntax-printf-and-wprintf-functions?view=msvc-160">여기</a>에 가면 더 자세히 나와있다.
