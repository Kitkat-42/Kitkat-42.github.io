---
layout: single
title: "[Netwhat] 프로젝트 소개, 개념 및 용어 정리"
categories: "Netwhat"
tags: [Netwhat, C]
---

# 프로젝트 소개

Netwhat은 네트워크 문제들에 대한 도입 프로젝트이다.  
이 프로젝트를 하면서 우리가 이미 일상에서 써왔던 것들이 어떻게 작동하는지 이해할 수 있게될 것이다.

# Mandatory Part

아래의 개념들에 대해 먼저 알아야 한다.

◦ What is an **IP address**  
◦ What is a **Netmask**  
◦ What is the **subnet** of an IP with Netmask  
◦ What is the **broadcast address** of a subnet  
◦ What are the different ways to represent an ip address with the Netmask  
◦ What are the differences between **public and private IPs**  
◦ What is a **class** of IP addresses  
◦ What is **TCP**  
◦ What is **UDP**  
◦ What are the **network layers**  
◦ What is the **OSI model**  
◦ What is a **DHCP server** and the **DHCP protocol**  
◦ What is a **DNS server** and the **DNS protocol**  
◦ What are the rules to make 2 devices communicate using IP addresses  
◦ How does **routing** work with IP  
◦ What is a default **gateway** for routing  
◦ What is a **port** from an IP point of view and what is it used for when connecting to another device

# 1. IP 주소(IP address)

> IP 주소(Internet Protocol address, IP address)란?

네트워킹이 가능한 장치들이 서로를 인식하고 통신을 하기 위해서 사용하는 특수한 번호이다.  
즉 PC뿐만 아니라 서버장비, 스마트폰, 태블릿PC, 인터넷이 가능한 전자사전 등 인터넷에 연결되는 모든 장치들도 IP주소를 갖고있다.

네트워크 상에서 통신을 하기 위해서는 몇가지 통신규약(Protocol)을 따라야 하는데, 그러한 규약들 중에는 "네트워킹을 하는 장비들에게 고유한 숫자를 부여해서 그 주소로 통신할 상대를 구분하도록 하자!"라는 의미를 가진 규약이 존재한다.  
위의 규약에서 말하는 고유한 주소가 바로 IP 주소인 것이다.

오늘날 주로 사용되고 있는 IP 주소는 IP 버전 4(IPv4) 주소이나 스마트폰, 노트북, 인터넷tv 등등 1인당 4~5개의 네트워크가 가능한 장비들을 소유하게 됨에 따라 이 주소가 고갈되어 길이를 늘린 IP 버전 6(IPv6) 주소가 점점 널리 사용되는 추세이다.

## 1.1 IPv4 주소 vs IPv6 주소

### IPv4 주소

32비트 범위이다.  
 0~255 사이의 십진수 4개를 쓰고 . 으로 구분해 나타낸다.  
 즉 0.0.0.0부터 255.255.255.255 까지가 된다. 약 40억개의 주소가 존재할 수 있도록 설계되었다.  
 중간의 일부 번호들은 특별한 용도를 위해 예약되어 있는데, 예를 들면 127.0.0.1은 로컬호스트(localhost)로 자기 자신을 가리킨다.  
 위 주소 체계는 내부적으로 32비트로 처리된다. 123.123.123.123을 예로 들면 1111011.1111011.1111011.1111011 로 표시된다.

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http%3A%2F%2Fcfile2.uf.tistory.com%2Fimage%2F995A2E405BF015D60813BE" />

> IP 주소는 대역에 따라 A, B, C, D, E 등의 클래스로 나누어질 수 있다.  
> 클래스 A: 대규모 네트워크 환경용  
> 클래스 B: 중규모 네트워크 환경용  
> 클래스 C: 소규모 네트워크 환경용  
> 클래스 D: 멀티캐스트용  
> 클래스 E: 연구/개발용 IP 주소 혹은 미래에 사용하기 위해 남겨놓은 것

또한 각 클래스 안에서 IP는 `Network ID`와 `Host ID`로 구분할 수 있다.

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http%3A%2F%2Fcfile7.uf.tistory.com%2Fimage%2F990E82425BF017D307CA56" />

> 클래스 내의 Network, Host ID 구분

### IPv6 주소

128비트 범위이다.  
 두자리 16진수 여덟 개를 쓰고 각각을 : 기호로 구분한다. (예: 21DA:00D3:0000:2F3B:02AA:00FF:FE28:9C5A)  
 2의 128제곱개의 주소가 존재할 수 있다.  
 IPv4에 비해서 보안적으로도 뛰어나지만 상용화되려면 기존의 네트워크 장비들을 모두 교체해야 하는 등 문제가 있어 아직은 다른 대안들을 이용하고 있다고 한다.

## 1.2 할당 방식에 따른 구분: 유동 IP vs 고정 IP?

- `유동 IP`  
  유동 IP방식은 skt, kt, lg 등과 같은 ISP업체에서 낭비되는 IP가 최소화될 수 있도록 고객들의 IP 주소를 관리하는 방법이다.  
  IP주소를 특정하여 주는 것이 아니라, `일정한 주기로 또는 접속이 바뀔 때마다 매번 새로운 IP를 주는 것`이다.

- `고정 IP`  
  기관, 회사, 사무실 또는 개인이 서버를 운영하는 등의 목적으로 고정 IP가 불가피하게 필요한 경우들이 있다.  
  이러한 경우에는 ISP업체로부터 고정 IP를 구매하여 이용하기도 한다.

> Mac OS에서 내 IP 주소를 보는 방법

`ipconfig getifaddr en0`  
를 터미널에 입력하면 나의 IP 주소를 확인할 수 있다.

![img](/assets/images/IP.png)

# 2. 넷마스크(Netmask)

> 넷마스크(Netmask)란?

- 네트워크 주소 부분의 비트를 1로 치환한 것이 넷마스크이다.
- IP 주소와 넷마스크를 AND연산을 하면 네트워크 주소를 얻을 수 있다.  
  일반적으로 사용되는 넷마스크는 255.255.255.0 이다.  
  호스트 주소 부분만 IPv4 IP 주소 뒤에 남기거나 필터링하기 위한 문자열이다.

예를 들어, IP 주소가 `203.0.113.43` 일 경우,
첫번째 옥텟이 192~223에 해당하므로 `C 클래스`이다.  
따라서, 네트워크 주소는 앞의 세자리 203.0.113.0이고, 호스트 주소는 맨 뒷자리인 0.0.0.43이다.

203.0.113.43 을 비트로 나타내면,  
`11001011.00000000.01110001.00101011` 이다.

따라서 이 IP 주소의 넷마스크는 네트워크 주소 부분의 비트를 1로 모두 치환한 `1111111.11111111.11111111.00000000` 이다.

이를 통해 일반적으로 사용되는(C 클래스) 넷마스크는 `255.255.255.0`이라는 점을 알 수 있다.

IP주소 11001011.00000000.01110001.00101011과 넷마스크 11111111.11111111.11111111.00000000을 AND 연산해보자.

> 비트의 AND 연산: 두 비트가 모두 1일 때 1이고, 하나라도 0이면 0이 된다.

연산결과: 11001011.00000000.01110001.00000000
(203.0.113.0, 즉 네트워크 주소만 남게 된다.)

요즘은 뚜렷하게 넷마스크와 서브넷마스크를 구분하지 않는다고 한다. 왜냐하면 CIDR 이후 subnet mask만 쓰고 있기 때문이다.

# 3. 서브넷(Subnet)

## 3.1 서브넷이란?

IPv4는 초기에 클래스로 나누어서 할당을 방법을 선택했다. 하지만 이 방식은 크게 비효율적이었다.  
예를 들어, 클래스 B를 어느 중소기업체에게 할당했을 경우 65000여개의 아이피를 다 쓰는 것이 아닌 10000개 정도만 쓴다고 가정하자.  
그러나 10000개가 아닌 나머지 50000여개의 IP는 쓰이지 않은 채 이 기업체는 클래스 B의 하나를 점유하고 있는 상태가 된다.  
그렇다고 이 기업체에게 클래스 C를 IP를 할당하자니 IP자원이 너무 부족하게 된다.

이러한 문제를 해결하기 위해 IP를 사용하는 네트워크 장치 수에 따라 효율적으로 사용할 수 있는 **서브넷(Subnet)**이 등장하게 되었다.

서브넷은 말 그대로 부분망이라는 뜻으로, IP주소에서 네트워크 영역을 부분적으로 나눈 부분망, 부분 네트워크를 말한다. 그리고 이 서브넷을 만들 때 쓰이는 것이 **서브넷 마스크(넷마스크)**이다. 이 서브넷 마스크를 이용하여 IP주소 체계의 Network ID와 Host ID를 분리할 수 있다.

## 3.2 CIDR(Classless Inter-Domain Routing) 표기법

위에서, `203.0.113.43`이라는 IP 주소에서 `203.0.113.0`은 네트워크 ID, `0.0.0.43`은 호스트 ID라고 했다.  
이처럼 네트워크 ID는 좌측 비트부터 사용하게 되는데, 옥텟과 . 만 사용하면 어디까지가 네트워크 ID고 어디부터가 호스트 ID인지 알 수 있는 방법이 없다.  
때문에 보편적으로 CIDR의 유연성있는 서브넷 마스크 표기법을 이용하여 표현한다.

- 서브넷 마스크 표기법: 1.1.1.0 (255.255.255.0)
- CIDR(prefix) 표기법: 1.1.1.0/24

위에서 표현한 1.1.1.0/24는 좌측에서부터 24비트, 즉 1.1.1 까지는 네트워크 ID라는 뜻이고, 1.1.1.0~1.1.1.255 가 1.1.1.0 대역 네트워크에서 보유한 호스트들이 된다.

## 3.3 서브넷팅(Subnetting)

위에서, IP 자원 문제를 해결하기 위해 서브넷을 도입했다고 했다.  
**서브넷팅**이란, 네트워크 자원을 효율적으로 사용하기 위해서 서브넷 마스크를 이용해 `하나의 네트워크를 여러 서브넷 네트워크로 분할`하는 것이다.

반대로, 네트워크를 합쳐 네트워크를 확장하는 슈퍼넷팅(supernetting)이라는 개념도 존재한다.  
서브넷팅은 서브넷 마스크를 이용하여 Host ID를 Network ID로 변환하게 되고, 슈퍼넷팅은 서브넷 마스크를 이용하여 Network ID를 Host ID로 변환하게 되어서 가능해진다.  
즉, 서브넷팅을 하는 경우에는 **네트워크 주소 부분의 비트를 연장**한다. 그리고 그 **나머지 호스트 부분이 호스트 식별자**가 된다.

ex.

예를 들어, A 클래스 IP주소 `1.1.1.1`의 기본 서브넷 마스크(255.0.0.0)를 B 클래스의 서브넷 마스크(255.255.0.0)로 변경한다고 하자.  
변경된 서브넷 마스크로 AND 연산을 하게되면 네트워크 ID가 기존의 1.0.0.0이 아닌 1.1.0.0 으로 확장된다.  
반대로 호스트 ID의 범위는 기존의 `0.0.0.0 ~ 0.255.255.255 (약 16,777,216개)` 에서 `0.0.0.0 ~ 0.0.255.255 (약 65,534개)`로 훨씬 적어졌음을 알 수 있다.

- 서브넷팅을 통해 Network ID가 확장되므로 할당할 수 있는 네트워크의 수가 늘어난다. 하지만 **네트워크가 분리됨으로 인하여, 서로가 통신하기 위해서는 라우터를 통해서만 가능**하다.

- 서브넷팅을 통해 네트워크가 분리되기 때문에 브로드캐스트 도메인의 크기가 줄어들고 브로드캐스트 주소가 다양해진다. 이 덕분에 **특정 몇군데의 호스트에서 너무 많은 트래픽을 발생시켜서 속도를 저하시키는 문제를 해결**할 수 있다.

## 3.4 서브넷팅 계산방법

서브넷 마스크는 2진수로 표현하였을 때 Network ID 부분은 1이 연속적으로 있어야 하며, Host ID 부분은 0이 연속적으로 있어야 한다.  
즉, 중간에 1이나 0이 섞이면서 나열될 수 없다.  
이로 인해 **서브넷 마스크가 Network ID를 확장하면서 1bit씩 확보하게 되면 네트워크 할당 가능 수가 `2배`로 증가하지만 반대로 호스트 할당가능 수가 `2배`로 줄어들게 된다.**  
예를 들어 `11111111.11111111.1111111.00000000(255.255.255.0)`에서 네 번째 옥탯에 1bit를 확보하면 `11111111.11111111.11111111.10000000(255.255.255.128)`이 된다.

ex.
예를 들어 `194.139.10.7/25` 라는 IP를 서브넷팅 해보자.  
`/25`는 서브넷 마스크가 25bit라는 의미로 `255.255.255.128`이 된다.  
그럼 호스트에 IP를 할당할 수 있는 범위가 `0~127`, `128~255`가 되며, 네트워크 영역은 `194.139.10.0`, `194.139.10.128`가 되어 2개로 나누어지게 된다.  
이 때, 네트워크 영역이 2개로 나누어진다는 의미는, **각 범위의 가장 첫 번째 IP를 네트워크 주소로 할당**한다는 의미다.  
결국 `194.139.10.7/25`가 속한 네트워크는 `194.139.10.0/25` 대역에 속하게 되며, 다른 서브넷팅 된 네트워크인 `194.139.10.128`과는 라우터를 통하여서만 통신할 수 있는 것이다.

| 서브넷팅          | IP 주소                         | 할당 객체         |
| ----------------- | ------------------------------- | ----------------- |
| 194.139.10.0/25   | 194.139.10.0                    | Network Address   |
|                   | 194.139.10.1 ~ 194.139.10.126   | Host IP           |
|                   | 194.139.10.127                  | Broadcast Address |
| 194.139.10.128/25 | 194.139.10.128                  | Network Address   |
|                   | 194.139.10.129 ~ 194.139.10.254 | Host IP           |
|                   | 194. 139.10.255                 | Broadcast Address |

# 4. Broadcast 주소(Broadcast address)

- 네트워크 주소

하나의 네트워크를 통칭하기 위한 주소.
계산방법: IP 주소와 서브넷마스크의 AND 연산으로 구할 수 있다.

- 브로드캐스트 주소

특정 네트워크에 속하는 모든 호스트들이 갖게 되는 주소. 네트워크에 있는 클라이언트 모두에게 데이터를 보내기 위한 것이다.
계산 방법: IP 주소에서 서브넷마스크의 '0'인 부분을 모두 1로 바꾼다.
ex.
C 클래스인 `203.0.113.43`이라는 IP 주소에서 네트워크의 주소가 203.0.113.0 이라고 한다면, **브로드캐스트 주소**는 `203.0.113.255`가 된다.

# 5. 공인 IP (Public IP) vs 사설 IP (Private IP)

## 5.1 공인 IP (Public IP)

인터넷 사용자의 로컬 네트워크를 식별하기 위해 **ISP(인터넷 서비스 공급자- 우리나라의 경우 SK 브로드밴드, KT 등)가 제공하는 IP 주소**이다.  
공용 IP 주소라고도 불리며 외부에 공개되어 있는 IP 주소이다.

- 공인 IP는 전세계에서 유일한 IP 주소를 갖는다.
- 공인 IP 주소가 외부에 공개되어 있기에 인터넷에 연결된 다른 PC로부터의 접근이 가능하다. 따라서 공인 IP 주소를 사용하는 경우에는 방화벽 등의 보안 프로그램을 설치할 필요가 있다.

## 5.2 사설 IP (Private IP)

**일반 가정이나 회사 내 등에 할당된 네트워크의 IP 주소**이다.  
로컬 IP, 가상 IP라고도 불리며 IPv4의 주소 부족으로 인해 서브넷팅된 IP이기 때문에 라우터에 의해 로컬 네트워크상의 PC나 장치에 할당된다.

> 사설 IP의 주소 대역

사설 IP 주소는 다음 3가지 주소대역으로 고정된다.

- A 클래스: **10**.0.0.0 ~ **10**.255.255.255
- B 클래스: **172.16**.0.0 ~ **172.31**.255.255
- C 클래스: **192.168**.0.0 ~ **192.168**.255.255

## 5.3 공인 IP와 사설 IP의 차이

|           | 공인 IP (Public IP)           | 사설 IP (Private IP)        |
| --------- | ----------------------------- | --------------------------- |
| 할당 주체 | ISP(인터넷 서비스 공급자)     | 라우터(공유기)              |
| 할당 대상 | 개인 또는 회사의 서버(라우터) | 개인 또는 회사의 기기       |
| 고유성    | 인터넷 상에서 유일한 주소     | 하나의 네트워크 안에서 유일 |
| 공개 여부 | 내/외부 접근 가능             | 외부 접근 불가능            |

사설 IP 주소만으로는 인터넷에 직접 연결할 수 없다.  
**라우터를 통해 1개의 공인 IP만 할당**하고, **라우터에 연결된 개인 PC는 사설 IP를 각각 할당받아** 인터넷에 접속할 수 있게 된다.

<img src="https://media.vlpt.us/post-images/noyo0123/d48baef0-f353-11e9-82fb-f1a0dfd61574/image.png" />

사설 IP를 할당받은 스마트폰 혹은 개인 PC가 데이터 패킷을 인터넷으로 전송하면, 라우터(공유기)가 해당 사설 IP를 공인 IP로 바꿔서 전송한다.  
인터넷에서 오는 데이터 패킷도 해당하는 사설 IP로 변경한 후 개인 스마트폰 혹은 PC에 전송된다.

# 6. 네트워크 통신: 데이터가 전달되는 원리

## 6.1 네트워크의 계층 구조

네트워크 상에서 여러 대의 컴퓨터가 데이터를 주고 받으려면 이들을 서로 연동할 수 있도록 표준화된 인터페이스를 지원해야한다.  
계층 구조는 네트워크뿐만 아니라 운영체제 등 다양한 분야에서 적용되는데, 계층 구조를 사용하는 목적은 `분할 정복(Divide and Conquer)` 때문이다.  
계층 구조의 또 다른 특징은, **위, 아래 층으로만 이동할 수 있다는 점**이다. 건너뛸 수 없으므로 다음 단계로 넘어가려면 이전 계층이 전제조건이 되어야 한다.

## 6.2 OSI 7 계층 모델

OSI 7 Model은 네트워크 통신 과정을 `7개의 계층`으로 구분한 산업 표준 참조 모델이다.  
초창기의 네트워크는 각 컴퓨터마다 시스템이 달랐기 때문에 하드웨어와 소프트웨어의 논리적인 변경없이 통신할 수 있는 표준 모델이 나타나게 되었다.

<img src="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F25303F355755856B02" />
> OSI 참조 모델의 7계층

## 6.3 TCP/IP 모델

그렇지만 OSI 참조 모델을 말그대로 참조 모델일 뿐 실제 사용되는 인터넷 프로토콜은 7계층 구조를 모두 따르지는 않는다.  
인터넷 프로토콜 스택(Internet Protocol Stack)은 현재 대부분 TCP/IP를 따른다.  
TCP/IP는 데이터의 흐름 관리, 정확성 확인, 패킷의 목적지 보장을 담당한다.  
`TCP`는 데이터의 정확성을 확인하고, `IP`는 패킷을 목적지까지 전송하는 일을 담당한다.

<img src="https://madplay.github.io/img/post/2018-02-04-network-tcp-udp-tcpip-1.png" />
> TCP/IP 모델의 4계층. 사실상 TCP/IP 모델의 Application(응용) 계층 하나에서 Application, Presentation, Session 계층의 구현을 다 하고 있다.

<img src="https://t1.daumcdn.net/cfile/tistory/27786B485715047219" />
> 데이터는 단계 별로 헤더(Data -> Segment -> Datagram -> Frame)를 붙여 전송하며, 이를 `데이터 캡슐화`라고 한다.

## 6.4 TCP vs UDP

TCP와 UDP는 TCP/IP의 `전송계층`에서 사용되는 프로토콜이다.  
`전송계층`은 **IP에 의해 전달되는 패킷의 오류를 검사**하고 **재전송 요구** 등의 제어를 담당하는 계층이다.

TCP(Transmission Control Protocol), UDP(User Datagram Protocol) 두 프로토콜은 모두 `패킷`을 한 컴퓨터에서 다른 컴퓨터로 전달해주는 `IP 프로토콜`을 기반으로 구현되어 있지만, 서로 다른 특징을 가지고 있다.

<img src="https://madplay.github.io/img/post/2018-02-04-network-tcp-udp-tcpip-2.png" />

> TCP의 데이터 송신 과정

<img src="https://madplay.github.io/img/post/2018-02-04-network-tcp-udp-tcpip-3.png" />

> UDP의 데이터 송신 과정. TCP와는 달리 일방적이다.

즉, **신뢰성이 요구되는 애플리케이션에서는 TCP**를 사용하고 **간단한 데이터를 빠른 속도로 전송하고자 할 때는 UDP**를 사용한다.

| TCP                                                                             | UDP                                                                  |
| ------------------------------------------------------------------------------- | -------------------------------------------------------------------- |
| 연결지향형 프로토콜(연결이 성공해야 통신 가능)                                  | 비 연결지향형 프로토콜(연결 없이 통신이 가능)                        |
| 바이트 스트림을 통한 연결 ( 데이터의 경계를 구분하지 않음. Byte-Stream Service) | 메세지 스트림을 통한 연결 (데이터의 경계를 구분함. Datagram Service) |
| Congestion / Flow control (혼잡제어, 흐름제어)                                  | NO Congestion / Flow control (혼잡제어와 흐름제어 지원 X)            |
| Ordered, Lower speed (순서 보장, 상대적으로 느림)                               | Not ordered, Higer speed (순서 보장되지 않음, 상대적으로 빠름)       |
| 신뢰성 있는 데이터 전송 - 안정적, 데이터의 재전송 존재                          | 데이터 전송 보장 X (데이터의 재전송 없음)                            |
| TCP packet : Segment (세그먼트 TCP 패킷)                                        | UDP packet : Datagram (데이터그램 UDP 패킷)                          |
| HTTP, Email, File transfer에서 사용                                             | DNS, Broadcasting (도메인, 실시간 동영상 서비스에서 사용)            |
| 일 대 일(Unicast) 통신)                                                         | 일 대 일, 일 대 다(Broadcast), 다 대 다(Multicast) 통신              |
| **공통점**                                                                      |                                                                      |
| - 포트 번호를 이용하여 주소를 지정                                              |                                                                      |
| - 데이터 오류 검사를 위한 체크섬 존재                                           |                                                                      |

# 7. DHCP / DNS 프로토콜: 더 편리한 인터넷을 위해

## 7.1 DHCP 프로토콜

DHCP(Dynamic Host Configuration Protocol)란, 동적 호스트 설정 프로토콜로서 해당 호스트에게 `IP주소, 서브넷 마스크, 기본 게이트웨이 IP 주소, DNS서버 IP주소`를 자동으로 `일정 시간` 할당해주는 인터넷 프로토콜이다.

DHCP를 통한 IP 주소 할당은 `임대(lease)`라는 개념을 가지고 있어 DHCP 서버가 IP 주소를 영구적으로 단말에 할당하는 것이 아니고 **임대기간(IP Lease Time)**을 명시하여 그 기간 동안만 IP 주소를 사용하도록 한다.  
단말이 임대 기간 이후에도 계속 해당 IP 주소를 사용하고자 한다면 **IP주소 임대기간 갱신(IP Address Renewal)**을 DHCP 서버에 요청해야 하고, 더 이상 사용하고자 하지 않으면 **IP 주소 반납 절차(IP Address Release)**를 수행하게 된다.

즉, `유동 IP`를 할당한다 = DHCP 서버로부터 IP를 일정기간만큼 임대해온다.

## 7.2 DHCP의 작동 과정

DHCP는 호스트가 네트워크에 접속할 때마다 IP 주소를 동적으로 할당한다.  
DHCP는 주로 가정용 인터넷이나 무선랜(LAN), 즉 공유기에서 사용한다.

DHCP는 UDP 프로토콜을 기반으로 작동한다. UDP의 특징인 단말 간 연결을 수립하지 않는다는 점과 신뢰성을 보장하지 않는다는 점 때문에 UDP는 TCP보다 성능이 좋다.  
호스트가 시작됐을 때 DHCP 서버를 알지 못하기 때문에 서브넷 상의 모든 노드로 브로드캐스팅해야 한다.
성능이 좋아야 하고 연결 대상을 모르기 때문에 UDP를 사용한다.

DHCP의 작동 과정은 다음과 같다.

1. DHCP Server Discovery (DHCP 서버 발견)

호스트는 자신이 접속할 DHCP 서버의 주소를 알지 못하기 때문에 DHCP 서버 발견 메시지를 서브넷 상의 모든 노드로 브로드캐스팅한다.

2. DHCP Server Offer (DHCP 서버 제공)

DHCP 발견 메시지를 받으면 서버 제공 메시지를 보낸다.  
서버 제공 메시지에는 클라이언트의 IP 주소, 도메인 이름, IP 주소 임대 기간 등의 설정 파라미터가 포함된다.  
DHCP Server Offer도 송신 호스트를 모르기 때문에 1번에서처럼 서브넷 상의 모든 노드로 브로드캐스팅한다.

3. DHCP Request (DHCP 요청)

호스트는 서브넷 상의 모든 노드로 DHCP 서버 발견 메시지를 보냈기 때문에 하나 이상의 서버 제공 메시지를 받게 된다.  
그 중 최적의 서버를 선택한 후 서버로 DHCP 요청 메시지를 보낸다.

4. DHCP ACK(Acknowledgement)

서버는 DHCP 요청 메시지에 대해 확정한다는 의미로 ACK 메시지를 보낸다.

<img src="https://media.vlpt.us/images/ette9844/post/0ea30566-f428-4564-9d97-ece1dc67e1e0/image.png" />

> DHCP의 작동 과정

- DHCP가 설정해주는 주소 정보들
  | 항목 | 결과 |
  | ---------------- | -------------------------------- |
  | IP 주소 | 192.168.0.4 |
  | 서브넷 마스크 | 255.255.255.0 |
  | 기본 게이트웨이 | 192.168.0.1 |
  | DNS 서버 IP 주소 | 210.220.163.82 / 219.250.363.130 |

## 7.3 DNS 프로토콜

DNS(Domain Name Server)란, 도메인 네임과 IP 주소의 대응 관계를 데이터베이스로 구축해 사용하는 인터넷 프로토콜이다.  
DNS는 브라우징을 단순화하는 매우 특별한 목적을 수행하는 인터넷 상의 또 다른 컴퓨터라고 볼 수 있다.  
자주 방문하는 사이트의 IP 주소를 매번 기억할 수 없기 때문에, 도메인 이름(www.으로 시작하는 주소)을 사용하는데, https://www.naver.com 과 같은 도메인을 125.209.222.141와 같은 IP 주소로 변환해주는 일을 바로 DNS가 수행하는 것이다. 이러한 DNS를 운영하는 서버를 네임서버(Name Server)라고 한다.

# 8. 라우팅(Routing)
